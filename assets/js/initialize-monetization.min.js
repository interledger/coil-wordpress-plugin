/*! Coil Web Monetization for WordPress v2.0.0 Tuesday 17th May 2022 11:04:41 AM GMT+0200 */
!function(l){if("undefined"!=typeof coilParams){if(v()||document.body.classList.contains("coil-public")){const L=coilParams.content_container,z=coilParams.paywall_title,P=coilParams.loading_content,x=coilParams.paywall_message,C=coilParams.streaming_widget_unpaid_message,k=coilParams.streaming_widget_paid_message,S=Boolean(coilParams.show_streaming_widget_to_members),E=coilParams.streaming_widget_link,q=coilParams.post_excerpt,j=Boolean(coilParams.has_coil_divider),A=coilParams.admin_missing_id_notice,T=coilParams.paywall_button_text,B=coilParams.paywall_button_link,M=coilParams.coil_message_branding,H=coilParams.streaming_widget_theme,I=coilParams.streaming_widget_size,Q=coilParams.streaming_widget_position,W=coilParams.streaming_widget_margin_top,N=coilParams.streaming_widget_margin_right,$=coilParams.streaming_widget_margin_bottom,D=coilParams.streaming_widget_margin_left,F=Boolean(coilParams.streaming_widget_enabled),G=coilParams.site_logo,J=coilParams.coil_logo,K=coilParams.coil_logo_streaming,O=coilParams.coil_logo_white,R=coilParams.coil_logo_white_streaming,U=coilParams.exclusive_message_theme,V=Boolean(coilParams.font_selection),X=wp.template("subscriber-only-message"),Y=wp.template("streaming-widget-message"),Z=l("p.monetize-msg");let n=!1;function t(e,t){const i=document.createElement("p");return i.classList.add("monetize-msg"),t&&i.classList.add(t),i.innerHTML=e,i}function i(e){const t=document.createElement("div");t.classList.add("entry-content","coil-message-container"),"dark"===U&&t.classList.add("coil-dark-theme"),V&&t.classList.add("coil-inherit-theme-font");let i="";"site_logo"===M&&""!==G?i='<img src="'+G+'">':"coil_logo"===M&&"dark"===U?i='<img src="'+O+'">':"coil_logo"===M&&(i='<img src="'+J+'">');e={headerLogo:i,title:z,content:e,button:{text:T,href:B}};return l(t).append(X(e)),t}function s(e){var t=function(e){var t=Q.split("-"),i=t[0],t=t[1];let o,n,s,a;const r=document.createElement("div");l(r).addClass("streaming-widget-container "+i+" "+t);let c="";c="light"===H?(r.classList.add("coil-light-theme"),J):O;"small"===I&&r.classList.add("streaming-widget-small");e={headerLogo:c,widget:{text:e,href:E}};l(r).append(Y(e)),a="left"===t?(n="0",d(D)):(n=d(N),"0");s="top"===i?(o=d(W),"0"):(o="0",d($));return l(r).find(".streaming-widget").css({"margin-top":o+"px","margin-right":n+"px","margin-bottom":s+"px","margin-left":a+"px"}),r}(e);l("body").append(t),/^\s+$/.test(e)&&l(".streaming-widget a div").hide(),l("#js-streaming-widget-dismiss").on("click",function(){h()||(Cookies.set("ShowStreamingWidgetMsg",1,{expires:14}),l(this).parent().parent().remove())}),l(".streaming-widget").hover(function(){l("#js-streaming-widget-dismiss").css("display","block")},function(){l("#js-streaming-widget-dismiss").css("display","none")})}function o(){var e=u(),t=0!==l(".streaming-widget-container").length,i=h(),o=0!==l("p.monetize-msg").length,n=0!==l(".coil-message-container").length;!e||t||i||o||n||s(C)}function d(e){return 0<=e.search(/[^1234567890-]/i)?"0":e}function a(){const e=document.querySelector(L);e&&(e.style.display="block")}function r(){const e=document.querySelector(L);e&&(e.style.display="none")}function c(){if(""!==q){const e=document.createElement("div");e.classList.add("entry-content","coil-message-container");const t=document.createElement("p");return t.classList.add("coil-post-excerpt"),t.innerHTML=q,l(e).append(t),e}}function m(){var e=document.body.classList.contains("coil-monetized"),t=document.body.classList.contains("coil-public");return e&&t}function g(){return document.body.classList.contains("coil-exclusive")}function u(){return F&&document.body.classList.contains("show-streaming-widget")}function p(){return".content-area .entry-content, main .entry-content"===L||".content-area .entry-content"===L}function f(){return!!document.body.classList.contains("coil-show-excerpt")}function w(){0<l("p.monetize-msg").length&&(l("p.monetize-msg").remove(),g()?j?(document.body.classList.add("show-fw-message"),l(".coil-restricted-content").before(i(x))):f()&&null!==c()?(0===l(".coil-post-excerpt").length&&l(L).before(c()),l(L).last().before(i(x))):(document.body.classList.add("show-fw-message"),l(L).before(i(x))):(document.body.classList.add("show-fw-message"),document.querySelector(L).before(i(x))))}function h(){var e=Cookies.get("ShowStreamingWidgetMsg");return void 0!==e&&"1"===e}function b(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?v()&&l(L).before(t(A,"admin-message")):l("body").removeClass("coil-missing-id"),m()||p()||a(),l("body").trigger("coil-missing-id")):m()||(g()&&j&&0===l("p.monetize-msg").length?l(".coil-restricted-content").after(t(P,"")):g()&&f()&&null!==c()?(document.body.classList.add("show-excerpt-message"),l(L).before(c()),l(L).last().before(t(P,""))):document.querySelector(L).before(t(P,"")),setTimeout(function(){w()},5e3))}function _(e){n=!0;let t="";var i,o;document.body.classList.contains("show-fw-message")&&l("body").removeClass("show-fw-message"),l("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),Z.remove(),f()&&l("p.coil-post-excerpt").remove(),g()&&l(".entry-content.coil-message-container").remove(),a(),function(){const e=document.querySelector(".coil-restricted-content");e&&(e.style.display="block")}(),document.querySelectorAll("iframe, object, video").forEach(function(e){return!(!e.classList.contains("intrinsic-ignore")&&!e.parentNode.classList.contains("intrinsic-ignore"))||void(e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height)))}),l("body").trigger("coil-monetization-initialized",[e]),0<l("p.monetize-msg").length&&l("p.monetize-msg").remove(),jQuery(window).trigger("resize"),S?(i=u(),o=0!==l(".streaming-widget-container").length,e=h(),t="light"===H?K:R,i&&!e&&(o?l(".streaming-widget div").text(k):s(k),l(".streaming-widget a").removeAttr("href").css("cursor","default"),l(".streaming-widget a").css("cursor","default"),l(".streaming-widget a img").attr("src",t))):l(".streaming-widget-container").remove()}function y(e){var t=e.detail.paymentPointer,i=e.detail.requestId,o=e.detail.amount,n=e.detail.assetCode,s=e.detail.assetScale;l("body").trigger("coil-monetization-progress",[e,t,i,o,n,s])}function e(){if(document.body.classList.contains("monetization-not-initialized")){if(!m()&&!p())if(j){const e=L.split(", ");e.forEach(e=>{l(e+" .coil-restricted-content").hide()})}else l(L).not(".coil-post-excerpt").hide();if(void 0!==document.monetization){switch(document.monetization.state){case"pending":b();break;case"started":g()&&j&&0===l("p.monetize-msg").length?l(".coil-restricted-content").after(t(P,"")):g()&&f()&&null!==c()?(document.body.classList.add("show-excerpt-message"),0===l(".coil-post-excerpt").length&&l(L).before(c()),0===l("p.monetize-msg").length&&l(L).last().before(t(P,""))):v()&&document.querySelector(L).before(t(P,""));break;case"stopped":g()&&j&&0===l("p.monetize-msg").length?l(".coil-restricted-content").after(t(P,"")):g()&&f()&&null!==c()?(r(),document.body.classList.add("show-excerpt-message"),0===l(".coil-post-excerpt").length&&l(L).before(c()),0===l("p.monetize-msg").length&&l(L).last().before(t(P,""))):g()&&(r(),0===l("p.monetize-msg").length&&l(L).before(t(P,""))),setTimeout(function(){!1===n&&l("p.monetize-msg").text()===P&&w()},5e3),o()}document.monetization.addEventListener("monetizationstart",_),document.monetization.addEventListener("monetizationprogress",y)}else window.Cypress&&window.Cypress.monetized||(l("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),g()?j?(document.body.classList.add("show-fw-message"),l(".coil-restricted-content").before(i(x))):(f()&&null!==c()?(document.body.classList.add("show-excerpt-message"),l(L).before(c())):document.body.classList.add("show-fw-message"),l(L).last().before(i(x))):o(),l("body").trigger("coil-extension-not-found"))}}l(document).ready(function(){document.addEventListener("coilstart",_),e()})}}else console.error("There was a problem retrieving the Coil parameters");function v(){let e;try{e=document.querySelector(coilParams.content_container)}catch(e){return void console.error("An error occured when attempting to retrieve the page. Invalid container.")}if(e)return 1;console.error("An error occured when attempting to retrieve the page. Container not found.")}}(jQuery);