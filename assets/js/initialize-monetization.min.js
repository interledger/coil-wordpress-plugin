/*! Coil Web Monetization for WordPress v1.9.0 Tuesday 28th September 2021 15:54:19 PM GMT+0200 */
!function(a){if("undefined"!=typeof coilParams&&function(){let e;try{e=document.querySelector(coilParams.content_container)}catch(e){return console.error("An error occured when attempting to retrieve the page. Invalid container."),!1}if(e)return!0;return console.error("An error occured when attempting to retrieve the page. Container not found."),!1}()){const v=coilParams.content_container,_=coilParams.paywall_title,L=coilParams.paywall_message,C=coilParams.unable_to_verify,S=coilParams.voluntary_donation,x=coilParams.loading_content,M=coilParams.partial_gating,k=coilParams.post_excerpt,q=coilParams.admin_missing_id_notice,E=coilParams.paywall_button_text,j=coilParams.learn_more_button_link,A=coilParams.coil_message_branding,T=coilParams.site_logo,Q=coilParams.coil_logo,B=coilParams.coil_logo_white,H=Boolean(coilParams.show_donation_bar),I=coilParams.exclusive_message_theme,N=Boolean(coilParams.font_selection),D=wp.template("subscriber-only-message"),F=wp.template("split-content-message"),G=wp.template("banner-message"),J=a("p.monetize-msg");let o=!1;function e(e,o){const t=document.createElement("p");return t.classList.add("monetize-msg"),o&&t.classList.add(o),t.innerHTML=e,t}function t(e){const o=document.createElement("div");o.classList.add("entry-content","coil-message-container"),"dark"===I&&o.classList.add("coil-dark-theme"),N&&o.classList.add("coil-inherit-theme-font");let t;t="site_logo"===A?T:"coil_logo"===A&&"dark"===I?B:"coil_logo"===A?Q:"";e={headerLogo:t,title:_,content:e,button:{text:E,href:j}};return a(o).append(D(e)),o}function i(e){const o=document.createElement("div");o.classList.add("coil-banner-message-container");e={content:e,button:{text:E,href:j}};return a(o).append(G(e)),o}function n(e){return F(e)}function s(){const e=document.querySelector(v);e&&(e.style.display="block")}function c(){if(""!==k){const e=document.createElement("p");return e.classList.add("coil-post-excerpt"),e.innerHTML=k,e}}function r(){return jQuery("p.coil-post-excerpt").remove()}function l(){return document.body.classList.contains("coil-no-gating")}function d(){return document.body.classList.contains("coil-gate-all")}function m(){return document.body.classList.contains("coil-gate-tagged-blocks")}function u(){return".content-area .entry-content"===v}function g(){return!!document.body.classList.contains("coil-show-excerpt")}function p(){0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),d()?g()&&c()?(document.body.classList.add("show-excerpt-message"),a(v).before(t(C)),a(v).prepend(c())):(document.body.classList.add("show-fw-message"),a(v).before(t(C))):m()?(a(".coil-show-monetize-users").prepend(n(C)),a(".coil-hide-monetize-users").removeClass("coil-hide-monetize-users"),s(),H&&!f("ShowCoilPublicMsg")&&(a("body").append(i(S)),b("ShowCoilPublicMsg"))):(document.body.classList.add("show-fw-message"),document.querySelector(v).before(t(C))))}function b(e){a("#js-coil-banner-dismiss").on("click",function(){f(e)||("ShowCoilPublicMsg"===e?Cookies.set(e,1,{expires:31}):"ShowCoilPartialMsg"===e&&Cookies.set(e,1),a(this).parent().parent().remove())})}function f(e){var o=Cookies.get(e);return void 0!==o&&("ShowCoilPublicMsg"===e||"ShowCoilPartialMsg"===e)&&"1"===o}function h(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?a(v).before(e(q,"admin-message")):a("body").removeClass("coil-missing-id"),l()||u()||(s(),a(v+"*.coil-hide-monetize-users").css("display","none"),a(v+"*.coil-show-monetize-users").css("display","none")),a("body").trigger("coil-missing-id")):l()?H&&document.body.classList.contains("monetization-not-initialized")&&!f("ShowCoilPublicMsg")&&(a("body").append(i(S)),b("ShowCoilPublicMsg")):(!d()||g()?document.querySelector(v).before(e(x,"")):a("p.coil-post-excerpt").after(e(x,"")),setTimeout(function(){r(),J.html(x)},2e3),setTimeout(function(){p()},5e3))}function y(){(d()||m())&&(r(),function(){const e=document.querySelector(v);e&&(e.style.display="none")}(),document.querySelector(v).before(e(x,""))),setTimeout(function(){!1===o&&(a("p.monetize-msg").text()===x?p():l()&&H&&!f("ShowCoilPublicMsg")&&(a("body").append(i(S)),b("ShowCoilPublicMsg")))},5e3)}function w(e){o=!0,l()||u()||(s(),document.body.classList.remove("show-fw-message"),g()&&r()),a("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),J.remove(),g()||a("div.coil-post-excerpt").remove(),H&&a("div").remove(".coil-banner-message-container"),document.querySelectorAll("iframe, object, video").forEach(function(e){return!(!e.classList.contains("intrinsic-ignore")&&!e.parentNode.classList.contains("intrinsic-ignore"))||void(e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height)))}),a("body").trigger("coil-monetization-initialized",[e]),0<a("p.monetize-msg").length&&(a("p.monetize-msg").remove(),r(),s()),jQuery(window).trigger("resize")}function z(e){var o=e.detail.paymentPointer,t=e.detail.requestId,i=e.detail.amount,n=e.detail.assetCode,s=e.detail.assetScale;a("body").trigger("coil-monetization-progress",[e,o,t,i,n,s])}function P(){if(document.body.classList.contains("monetization-not-initialized"))if(l()||u()||a(v).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":h();break;case"started":document.querySelector(v).before(e(x,""));break;case"stopped":y()}document.monetization.addEventListener("monetizationstart",w),document.monetization.addEventListener("monetizationprogress",z)}else window.Cypress&&window.Cypress.monetized||(a("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),d()?(a(v).before(t(L)),g()&&c()?(document.body.classList.add("show-excerpt-message"),a(v).prepend(c())):document.body.classList.add("show-fw-message")):m()?(a(".coil-show-monetize-users").prepend(n(M)),a(".coil-hide-monetize-users").removeClass("coil-hide-monetize-users"),s(),H&&!f("ShowCoilPublicMsg")&&(a("body").append(i(S)),b("ShowCoilPublicMsg"))):l()&&H&&!f("ShowCoilPublicMsg")&&(a("body").append(i(S)),b("ShowCoilPublicMsg")),a("body").trigger("coil-extension-not-found"))}a(document).ready(function(){document.addEventListener("coilstart",P),P()})}}(jQuery);