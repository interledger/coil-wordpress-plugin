/*! Coil Web Monetization for WordPress v1.9.0 Monday 28th March 2022 12:17:48 PM GMT+0200 */
!function(r){if("undefined"!=typeof coilParams){if(L()||document.body.classList.contains("coil-public")){const P=coilParams.content_container,x=coilParams.paywall_title,C=coilParams.loading_content,k=coilParams.paywall_message,S=coilParams.coil_button_unpaid_message,E=coilParams.coil_button_paid_message,q=Boolean(coilParams.show_coil_button_to_members),j=coilParams.coil_button_link,A=coilParams.post_excerpt,B=coilParams.admin_missing_id_notice,T=coilParams.paywall_button_text,M=coilParams.paywall_button_link,H=coilParams.coil_message_branding,I=coilParams.coil_button_theme,Q=coilParams.coil_button_size,N=coilParams.coil_button_position,$=coilParams.button_margin_top,D=coilParams.button_margin_right,F=coilParams.button_margin_bottom,G=coilParams.button_margin_left,J=Boolean(coilParams.coil_button_enabled),K=coilParams.site_logo,O=coilParams.coil_logo,R=coilParams.coil_logo_streaming,U=coilParams.coil_logo_white,V=coilParams.coil_logo_white_streaming,W=coilParams.exclusive_message_theme,X=Boolean(coilParams.font_selection),Y=wp.template("subscriber-only-message"),Z=wp.template("split-content-message"),ee=wp.template("coil-button-message"),te=r("p.monetize-msg");let i=!1;function e(e,t){const o=document.createElement("p");return o.classList.add("monetize-msg"),t&&o.classList.add(t),o.innerHTML=e,o}function t(e){const t=document.createElement("div");t.classList.add("entry-content","coil-message-container"),"dark"===W&&t.classList.add("coil-dark-theme"),X&&t.classList.add("coil-inherit-theme-font");let o="";"site_logo"===H&&""!==K?o='<img src="'+K+'">':"coil_logo"===H&&"dark"===W?o='<img src="'+U+'">':"coil_logo"===H&&(o='<img src="'+O+'">');e={headerLogo:o,title:x,content:e,button:{text:T,href:M}};return r(t).append(Y(e)),t}function s(e){var t=function(e){var t=N.split("-"),o=t[0],t=t[1];let n,i,s,c;const a=document.createElement("div");r(a).addClass("coil-button-message-container "+o+" "+t);let l="";l="light"===I?(a.classList.add("coil-light-theme"),O):U;"small"===Q&&a.classList.add("coil-button-small");e={headerLogo:l,button:{text:e,href:j}};r(a).append(ee(e)),c="left"===t?(i="0",m(G)):(i=m(D),"0");s="top"===o?(n=m($),"0"):(n="0",m(F));return r(a).find(".coil-button").css({"margin-top":n+"px","margin-right":i+"px","margin-bottom":s+"px","margin-left":c+"px"}),a}(e);r("body").append(t),/^\s+$/.test(e)&&r(".coil-button a div").hide(),r("#js-coil-button-dismiss").on("click",function(){y()||(Cookies.set("ShowCoilButtonMsg",1,{expires:14}),r(this).parent().parent().remove())}),r(".coil-button").hover(function(){r("#js-coil-button-dismiss").css("display","block")},function(){r("#js-coil-button-dismiss").css("display","none")})}function o(){var e=g(),t=0!==r(".coil-button-message-container").length,o=y(),n=0!==r("p.monetize-msg").length,i=0!==r(".coil-message-container").length;!e||t||o||n||i||s(S)}function m(e){return 0<=e.search(/[^1234567890-]/i)?"0":e}function n(e){return Z(e)}function c(){const e=document.querySelector(P);e&&(e.style.display="block")}function a(){const e=document.querySelector(P);e&&(e.style.display="none")}function l(){if(""!==A){const e=document.createElement("div");e.classList.add("entry-content","coil-message-container");const t=document.createElement("p");return t.classList.add("coil-post-excerpt"),t.innerHTML=A,r(e).append(t),e}}function d(){var e=document.body.classList.contains("coil-monetized"),t=document.body.classList.contains("coil-public");return e&&t}function u(){return document.body.classList.contains("coil-exclusive")}function g(){return J&&document.body.classList.contains("show-coil-button")}function b(){var e=document.body.classList.contains("coil-monetized"),t=document.body.classList.contains("coil-gate-tagged-blocks");return e&&t}function p(){return".content-area .entry-content"===P}function f(){return!!document.body.classList.contains("coil-show-excerpt")}function h(){0<r("p.monetize-msg").length&&(r("p.monetize-msg").remove(),u()?f()&&null!==l()?(0===r(".coil-post-excerpt").length&&r(P).before(l()),r(P).last().before(t(k))):(document.body.classList.add("show-fw-message"),r(P).before(t(k))):b()?(r(".coil-show-monetize-users").prepend(n(k)),r(".coil-show-monetize-users").css("display","block"),c()):(document.body.classList.add("show-fw-message"),document.querySelector(P).before(t(k))))}function y(){var e=Cookies.get("ShowCoilButtonMsg");return void 0!==e&&"1"===e}function _(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?L()&&r(P).before(e(B,"admin-message")):r("body").removeClass("coil-missing-id"),d()||p()||(c(),r(P+"*.coil-hide-monetize-users").css("display","none"),r(P+"*.coil-show-monetize-users").css("display","none")),r("body").trigger("coil-missing-id")):d()||(u()&&f()&&null!==l()?(document.body.classList.add("show-excerpt-message"),r(P).before(l()),r(P).last().before(e(C,""))):document.querySelector(P).before(e(C,"")),setTimeout(function(){h()},5e3))}function w(e){i=!0;let t="";var o,n;document.body.classList.contains("show-fw-message")&&r("body").removeClass("show-fw-message"),r("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),te.remove(),f()&&r("p.coil-post-excerpt").remove(),u()?r(".entry-content.coil-message-container").remove():b()&&(r(".coil-show-monetize-users").removeClass("coil-show-monetize-users"),r(".coil-split-content-message").remove(),r("*.coil-hide-monetize-users").css("display","none")),c(),document.querySelectorAll("iframe, object, video").forEach(function(e){return!(!e.classList.contains("intrinsic-ignore")&&!e.parentNode.classList.contains("intrinsic-ignore"))||void(e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height)))}),r("body").trigger("coil-monetization-initialized",[e]),0<r("p.monetize-msg").length&&r("p.monetize-msg").remove(),jQuery(window).trigger("resize"),q?(o=g(),n=0!==r(".coil-button-message-container").length,e=y(),t="light"===I?R:V,o&&!e&&(n?r(".coil-button div").text(E):s(E),r(".coil-button a").removeAttr("href").css("cursor","default"),r(".coil-button a").css("cursor","default"),r(".coil-button a img").attr("src",t))):r(".coil-button-message-container").remove()}function v(e){var t=e.detail.paymentPointer,o=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;r("body").trigger("coil-monetization-progress",[e,t,o,n,i,s])}function z(){if(document.body.classList.contains("monetization-not-initialized"))if(d()||p()||r(P).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":_();break;case"started":u()&&f()&&null!==l()?(document.body.classList.add("show-excerpt-message"),0===r(".coil-post-excerpt").length&&r(P).before(l()),0===r("p.monetize-msg").length&&r(P).last().before(e(C,""))):L()&&document.querySelector(P).before(e(C,""));break;case"stopped":u()&&f()&&null!==l()?(a(),document.body.classList.add("show-excerpt-message"),0===r(".coil-post-excerpt").length&&r(P).before(l()),0===r("p.monetize-msg").length&&r(P).last().before(e(C,""))):(u()||b())&&(a(),0===r("p.monetize-msg").length&&r(P).before(e(C,""))),setTimeout(function(){!1===i&&r("p.monetize-msg").text()===C&&h()},5e3),o()}document.monetization.addEventListener("monetizationstart",w),document.monetization.addEventListener("monetizationprogress",v)}else window.Cypress&&window.Cypress.monetized||(r("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),u()?(f()&&null!==l()?(document.body.classList.add("show-excerpt-message"),r(P).before(l())):document.body.classList.add("show-fw-message"),r(P).last().before(t(k))):b()?(r(".coil-show-monetize-users").prepend(n(k)),c()):o(),r("body").trigger("coil-extension-not-found"))}r(document).ready(function(){document.addEventListener("coilstart",w),z()})}}else console.error("There was a problem retrieving the Coil parameters");function L(){let e;try{e=document.querySelector(coilParams.content_container)}catch(e){return void console.error("An error occured when attempting to retrieve the page. Invalid container.")}if(e)return 1;console.error("An error occured when attempting to retrieve the page. Container not found.")}}(jQuery);