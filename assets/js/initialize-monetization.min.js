/*! Coil Web Monetization for WordPress v1.9.0 Friday 11th February 2022 17:27:52 PM GMT+0200 */
!function(c){if("undefined"!=typeof coilParams&&function(){let e;try{e=document.querySelector(coilParams.content_container)}catch(e){return console.error("An error occured when attempting to retrieve the page. Invalid container."),!1}if(e)return!0;return console.error("An error occured when attempting to retrieve the page. Container not found."),!1}()){const v=coilParams.content_container,L=coilParams.paywall_title,P=coilParams.loading_content,_=coilParams.paywall_message,C=coilParams.post_excerpt,x=coilParams.admin_missing_id_notice,S=coilParams.paywall_button_text,k=coilParams.paywall_button_link,M=coilParams.coil_message_branding,E=coilParams.site_logo,q=coilParams.coil_logo,A=coilParams.coil_logo_white,j=Boolean(coilParams.show_promotion_bar),T=coilParams.exclusive_message_theme,B=Boolean(coilParams.font_selection),H=wp.template("subscriber-only-message"),I=wp.template("split-content-message"),Q=wp.template("banner-message"),N=c("p.monetize-msg");let o=!1;function e(e,o){const t=document.createElement("p");return t.classList.add("monetize-msg"),o&&t.classList.add(o),t.innerHTML=e,t}function t(e){const o=document.createElement("div");o.classList.add("entry-content","coil-message-container"),"dark"===T&&o.classList.add("coil-dark-theme"),B&&o.classList.add("coil-inherit-theme-font");let t;t="site_logo"===M?E:"coil_logo"===M&&"dark"===T?A:"coil_logo"===M?q:"";e={headerLogo:t,title:L,content:e,button:{text:S,href:k}};return c(o).append(H(e)),o}function n(){const e=document.createElement("div");e.classList.add("coil-banner-message-container");var o={button:{text:S,href:k}};return c(e).append(Q(o)),e}function i(e){return I(e)}function s(){const e=document.querySelector(v);e&&(e.style.display="block")}function a(){const e=document.querySelector(v);e&&(e.style.display="none")}function r(){if(""!==C){const e=document.createElement("div");e.classList.add("entry-content","coil-message-container");const o=document.createElement("p");return o.classList.add("coil-post-excerpt"),o.innerHTML=C,c(e).append(o),e}}function l(){var e=document.body.classList.contains("coil-monetized"),o=document.body.classList.contains("coil-public");return e&&o}function d(){return document.body.classList.contains("coil-exclusive")}function m(){var e=document.body.classList.contains("coil-monetized"),o=document.body.classList.contains("coil-gate-tagged-blocks");return e&&o}function u(){return".content-area .entry-content"===v}function g(){return!!document.body.classList.contains("coil-show-excerpt")}function p(){0<c("p.monetize-msg").length&&(c("p.monetize-msg").remove(),d()?g()&&null!==r()?(0===c(".coil-post-excerpt").length&&c(v).before(r()),c(v).last().before(t(_))):(document.body.classList.add("show-fw-message"),c(v).before(t(_))):m()?(c(".coil-show-monetize-users").prepend(i(_)),c(".coil-show-monetize-users").css("display","block"),s()):(document.body.classList.add("show-fw-message"),document.querySelector(v).before(t(_))))}function b(e){c("#js-coil-banner-dismiss").on("click",function(){f(e)||("ShowCoilPublicMsg"===e?Cookies.set(e,1,{expires:31}):"ShowCoilPartialMsg"===e&&Cookies.set(e,1),c(this).parent().parent().remove())})}function f(e){var o=Cookies.get(e);return void 0!==o&&("ShowCoilPublicMsg"===e||"ShowCoilPartialMsg"===e)&&"1"===o}function h(){document.body.classList.contains("coil-missing-id")?(document.body.classList.contains("coil-show-admin-notice")?c(v).before(e(x,"admin-message")):c("body").removeClass("coil-missing-id"),l()||u()||(s(),c(v+"*.coil-hide-monetize-users").css("display","none"),c(v+"*.coil-show-monetize-users").css("display","none")),c("body").trigger("coil-missing-id")):l()?j&&document.body.classList.contains("monetization-not-initialized")&&!f("ShowCoilPublicMsg")&&(c("body").append(n()),b("ShowCoilPublicMsg")):(d()&&g()&&null!==r()?(document.body.classList.add("show-excerpt-message"),c(v).before(r()),c(v).last().before(e(P,""))):document.querySelector(v).before(e(P,"")),setTimeout(function(){p()},5e3))}function y(e){o=!0,document.body.classList.contains("show-fw-message")&&c("body").removeClass("show-fw-message"),c("body").removeClass("monetization-not-initialized").addClass("monetization-initialized"),N.remove(),g()&&c("p.coil-post-excerpt").remove(),j&&c("div").remove(".coil-banner-message-container"),d()?c(".entry-content.coil-message-container").remove():m()&&(c(".coil-show-monetize-users").removeClass("coil-show-monetize-users"),c(".coil-split-content-message").remove(),c("*.coil-hide-monetize-users").css("display","none")),s(),document.querySelectorAll("iframe, object, video").forEach(function(e){return!(!e.classList.contains("intrinsic-ignore")&&!e.parentNode.classList.contains("intrinsic-ignore"))||void(e.dataset.origwidth||(e.setAttribute("data-origwidth",e.width),e.setAttribute("data-origheight",e.height)))}),c("body").trigger("coil-monetization-initialized",[e]),0<c("p.monetize-msg").length&&c("p.monetize-msg").remove(),jQuery(window).trigger("resize")}function w(e){var o=e.detail.paymentPointer,t=e.detail.requestId,n=e.detail.amount,i=e.detail.assetCode,s=e.detail.assetScale;c("body").trigger("coil-monetization-progress",[e,o,t,n,i,s])}function z(){if(document.body.classList.contains("monetization-not-initialized"))if(l()||u()||c(v).not(".coil-post-excerpt").hide(),void 0!==document.monetization){switch(document.monetization.state){case"pending":h();break;case"started":d()&&g()&&null!==r()&&(document.body.classList.add("show-excerpt-message"),0===c(".coil-post-excerpt").length&&c(v).before(r()),0===c("p.monetize-msg").length&&c(v).last().before(e(P,""))),document.querySelector(v).before(e(P,""));break;case"stopped":d()&&g()&&null!==r()?(a(),document.body.classList.add("show-excerpt-message"),0===c(".coil-post-excerpt").length&&c(v).before(r()),0===c("p.monetize-msg").length&&c(v).last().before(e(P,""))):(d()||m())&&(a(),0===c("p.monetize-msg").length&&c(v).before(e(P,""))),setTimeout(function(){!1===o&&(c("p.monetize-msg").text()===P?p():l()&&j&&!f("ShowCoilPublicMsg")&&(c("body").append(n()),b("ShowCoilPublicMsg")))},5e3)}document.monetization.addEventListener("monetizationstart",y),document.monetization.addEventListener("monetizationprogress",w)}else window.Cypress&&window.Cypress.monetized||(c("body").removeClass("monetization-not-initialized").addClass("coil-extension-not-found"),d()?(c(v).before(t(_)),g()&&null!==r()?(document.body.classList.add("show-excerpt-message"),c(v).before(r())):document.body.classList.add("show-fw-message")):m()?(c(".coil-show-monetize-users").prepend(i(_)),s()):l()&&j&&!f("ShowCoilPublicMsg")&&(c("body").append(n()),b("ShowCoilPublicMsg")),c("body").trigger("coil-extension-not-found"))}c(document).ready(function(){document.addEventListener("coilstart",y),z()})}}(jQuery);