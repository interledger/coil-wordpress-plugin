/*! Coil Web Monetization for WordPress v1.9.0 Monday 11th April 2022 11:06:13 AM GMT+0200 */
!function(s){if("undefined"!=typeof coilAdminParams&&coilAdminParams.ajax_url){const g=coilAdminParams.site_logo_url,m=coilAdminParams.coil_logo_url.light,_=coilAdminParams.coil_logo_url.dark,u=coilAdminParams.coil_streaming_logo_url.light,d=coilAdminParams.coil_streaming_logo_url.dark,p=coilAdminParams.not_monetized_post_types,v=coilAdminParams.exclusive_post_types,h=coilAdminParams.general_modal_msg,w=coilAdminParams.exclusive_modal_msg,f=coilAdminParams.invalid_payment_pointer_msg,y=coilAdminParams.invalid_blank_input_msg,x=coilAdminParams.invalid_url_msg,b=coilAdminParams.invalid_margin_value_msg,k=coilAdminParams.streaming_widget_position,A=s(".nav-tab-wrapper a.nav-tab-active").attr("id"),P="#EE4852",$=s("form").serialize();let l=!1;var t,i;if("coil-welcome-settings"===A&&(0===s(".coil-welcome-notice").length?s(".tab-styling .button-primary").show():s(".tab-styling .button-primary").hide()),"coil-general-settings"===A){const C=s(".coil-no-payment-pointer-notice");0<C.length&&(C.hide(),0<s("#setting-error-settings_updated").length&&C.show())}if("coil-exclusive-settings"===A&&(t=s('input[name="coil_exclusive_settings_group[coil_exclusive_toggle]"]').is(":checked"),i="site_logo"===s("#coil_branding option:selected").val(),t?s("*.exclusive-content-section").show():s("*.exclusive-content-section").hide(),i?s(".set-site-logo-description").show():s(".set-site-logo-description").hide()),"streaming-support-widget-settings"===A){const z=s('input[name="streaming_widget_settings_group[streaming_widget_toggle]"]').is(":checked"),T=s("#streaming_widget_text"),E=s("#members_streaming_widget_text"),j=/^\s+$/,D=k.split("-");z?s("*.streaming-support-widget-section").show():s("*.streaming-support-widget-section").hide(),j.test(T.val())&&s("div.coil-preview.coil-non-members .streaming-support-widget div > div").hide(),j.test(E.val())&&s("div.coil-preview.coil-members .streaming-support-widget div > div").hide(),s(".margin-"+D[0]).show(),s(".margin-"+D[1]).show()}function e(t,i,e,n){let o="";i.forEach(t=>{document.getElementById(t+e).checked&&(o+=t+"s, ")}),0<o.length&&(o=o.slice(0,-2),o=o.replace(/,([^,]*)$/," and$1"),n=n.replace("{postTypes}",o),confirm(n)||"boolean"==typeof t.cancelable&&!t.cancelable||(t.preventDefault(),l=!1))}function n(i,t,e){const n=i.next(),o=s(document).scrollTop();let l=null;if(null!==n&&n.hasClass("invalid-input")&&(l=n),t)null!==l&&(i.removeAttr("style"),l.remove());else if(i.css("border-color",P),null===l){i.after('<p class="invalid-input" style="color: '+P+'">'+e+"</p>");i=i.prev().position();let t;t=void 0!==i?i.top:0,o>t?s("html, body").animate({scrollTop:t+"px"}):s("html, body").animate({scrollTop:"0px"})}}function o(i){const t=i.next().next(),e=s(document).scrollTop();var n=/(^(-)?[0-9]+((p)|(px)|(P)|(PX))?$)/.test(i.val())||""===i.val();let o=null;if(null!==t&&t.hasClass("invalid-input")&&(o=t),n)null!==o&&(i.removeAttr("style"),o.remove());else if(i.css("border-color",P),null===o){null!==i.next()&&i.next().after('<p class="invalid-input" style="color: '+P+'">'+b+"</p>");let t;null!==s(".coil-margin-input-group")&&null!==s(".coil-margin-input-group").prev()?void 0!==(i=s(".coil-margin-input-group").prev().position())&&(t=i.top):t=0,e>t?s("html, body").animate({scrollTop:t+"px"}):s("html, body").animate({scrollTop:"0px"})}}function a(t,i,e,n){const o=t.next();let l=null;null!==o&&o.hasClass("invalid-input")&&(l=o),null!==l&&i?(t.removeAttr("style"),l.remove()):e&&/^\s+$/.test(t.val())&&null===l&&(t.css("border-color",P),t.after('<p class="invalid-input" style="color: '+P+'">'+n+"</p>"))}function c(t){const i=t.next().next(),e=/^\s+$/,n=!e.test(t.val()),o=/(^(-)?[0-9]+((p)|(px)|(P)|(PX))?$)/.test(t.val())||""===t.val();let l=null;void 0!==i&&null!==i&&i.hasClass("invalid-input")&&(l=i),null!==l?(n&&l.text()===y||o&&l.text()===b)&&(t.removeAttr("style"),l.remove()):e.test(t.val())&&null===l&&null!==t.next()&&(t.css("border-color",P),t.next().after('<p class="invalid-input" style="color: '+P+'">'+y+"</p>"))}function r(t){let i;try{i=new URL(t)}catch(t){return!1}return"http:"===i.protocol||"https:"===i.protocol}window.addEventListener("beforeunload",function(t){l||$===s("form").serialize()?delete t.returnValue:(t.preventDefault(),t.returnValue="")}),s(document).on("submit","form",function(){l=!0,"coil-exclusive-settings"===A?e(event,p,"_visibility_exclusive",w):"coil-general-settings"===A&&e(event,v,"_monetization_not-monetized",h)}),s(document).on("focusout","#coil_payment_pointer",function(){n(s("#coil_payment_pointer"),/^(https:\/\/.)|^[\$]./.test(s(this).val()),f)}),s(document).on("input","#coil_payment_pointer",function(){a(s("#coil_payment_pointer"),/^(https:\/\/.)|^[\$]./.test(s(this).val()),!1,"")}),s(document).on("change",'input[name="coil_exclusive_settings_group[coil_exclusive_toggle]"]',function(){s(".exclusive-content-section").toggle()}),s(document).on("input","#coil_paywall_title",function(){""!==s(this).val()?s(".coil-paywall-heading").text(s(this).val()):s(".coil-paywall-heading").text(s(this).attr("placeholder"))}),s(document).on("input","#coil_paywall_message",function(){""!==s(this).val()?s(".coil-paywall-body").text(s(this).val()):s(".coil-paywall-body").text(s(this).attr("placeholder"))}),s(document).on("focusout","#coil_paywall_button_text",function(){n(s("#coil_paywall_button_text"),!/^\s+$/.test(s(this).val()),y)}),s(document).on("input","#coil_paywall_button_text",function(){const t=s("#coil_paywall_button_text"),i=/^\s+$/,e=!i.test(s(this).val());a(t,e,!0,y),""===s(this).val()||i.test(s(this).val())?s(".coil-paywall-cta").text(s(this).attr("placeholder")):s(".coil-paywall-cta").text(s(this).val())}),s(document).on("focusout","#coil_paywall_button_link",function(){n(s("#coil_paywall_button_link"),r(s(this).val())||""===s(this).val(),x)}),s(document).on("input","#coil_paywall_button_link",function(){a(s("#coil_paywall_button_link"),!/^\s+$/.test(s(this).val()),!0,y)}),s(document).on("change",'input[name="coil_exclusive_settings_group[coil_message_color_theme]"]',function(){var t=s(this).val(),i=s("#coil_branding").val();let e="";s(".coil-paywall-container").attr("data-theme",t),"coil_logo"===i&&(e="light"===t?m:_,s(".coil-paywall-image").attr("src",e))}),s(document).on("change","#coil_branding",function(){"site_logo"===s("#coil_branding option:selected").val()?s(".set-site-logo-description").show():s(".set-site-logo-description").hide()}),s(document).on("change","#coil_branding",function(){var t=s(this).val(),i=s('input[name="coil_exclusive_settings_group[coil_message_color_theme]"]:checked').val();let e="";s(".coil-paywall-image").removeClass("no_logo site_logo coil_logo").addClass(t),"coil_logo"===t?e="light"===i?m:_:"site_logo"===t&&(e=g,""===e?s(".site_logo").hide():s(".site_logo").show()),s(".coil-paywall-image").attr("src",e)}),s(document).on("change",'input[name="coil_exclusive_settings_group[coil_title_padlock]"]',function(){s(this).closest(".coil-row").find(".coil-column-5").toggleClass("hidden")}),s(document).on("change",'input[name="coil_exclusive_settings_group[coil_padlock_icon_position]"]',function(){var t=s(this).val();s(".coil-title-preview-container").attr("data-padlock-icon-position",t)}),s(document).on("change",'input[name="coil_exclusive_settings_group[coil_padlock_icon_style]"]',function(){const t=s(this),i=s(".coil-title-preview-container .coil-padlock-icon"),e=t.siblings("svg").clone();i.html(e)}),s(document).on("input","#coil_content_container",function(){a(s("#coil_content_container"),!/^\s+$/.test(s(this).val()),!0,y)}),s(document).on("change",'input[name="streaming_widget_settings_group[streaming_widget_toggle]"]',function(){s(".streaming-support-widget-section").toggle()}),s(document).on("input","#streaming_widget_text",function(){var t="div.coil-preview.coil-non-members .streaming-support-widget div > div";""!==s(this).val()?/^\s+$/.test(s(this).val())?s(t).hide():(s(t).text(s(this).val()),s(t).show()):(s(t).text(s(this).attr("placeholder")),s(t).show())}),s(document).on("focusout","#streaming_widget_link",function(){n(s("#streaming_widget_link"),r(s(this).val())||""===s(this).val(),x)}),s(document).on("input","#streaming_widget_link",function(){a(s("#streaming_widget_link"),!/^\s+$/.test(s(this).val()),!0,y)}),s(document).on("input","#members_streaming_widget_text",function(){var t="div.coil-preview.coil-members .streaming-support-widget div > div";""!==s(this).val()?/^\s+$/.test(s(this).val())?s(t).hide():(s(t).text(s(this).val()),s(t).show()):(s(t).text(s(this).attr("placeholder")),s(t).show())}),s(document).on("change",'input[name="streaming_widget_settings_group[streaming_widget_color_theme]"]',function(){var t=s(this).val();let i="",e="";s(".coil-preview .streaming-support-widget").attr("data-theme",t),e="light"===t?(i=m,u):(i=_,d),s(".coil-preview.coil-non-members .streaming-support-widget-image").attr("src",i),s(".coil-preview.coil-members .streaming-support-widget-image").attr("src",e)}),s(document).on("change",'input[name="streaming_widget_settings_group[streaming_widget_member_display]"]',function(){s("div.coil-preview.coil-members").toggleClass("hide")}),s(document).on("change",'input[name="streaming_widget_settings_group[streaming_widget_size]"]',function(){var t=s(this).val();s(".coil-preview .streaming-support-widget").attr("data-size",t)}),s(document).on("change",'select[name="streaming_widget_settings_group[streaming_widget_position]"]',function(){const t=s(this).val(),i=t.split("-");s(".coil-preview .streaming-support-widget").attr("data-position",t),"top"===i[0]?(s(".margin-bottom").hide(),s(".margin-top").show()):(s(".margin-top").hide(),s(".margin-bottom").show()),"left"===i[1]?(s(".margin-right").hide(),s(".margin-left").show()):(s(".margin-left").hide(),s(".margin-right").show())}),s(document).on("input","#streaming_widget_top_margin",function(){c(s("#streaming_widget_top_margin"))}),s(document).on("focusout","#streaming_widget_top_margin",function(){o(s("#streaming_widget_top_margin"))}),s(document).on("input","#streaming_widget_bottom_margin",function(){c(s("#streaming_widget_bottom_margin"))}),s(document).on("focusout","#streaming_widget_bottom_margin",function(){o(s("#streaming_widget_bottom_margin"))}),s(document).on("input","#streaming_widget_right_margin",function(){c(s("#streaming_widget_right_margin"))}),s(document).on("focusout","#streaming_widget_right_margin",function(){o(s("#streaming_widget_right_margin"))}),s(document).on("input","#streaming_widget_left_margin",function(){c(s("#streaming_widget_left_margin"))}),s(document).on("focusout","#streaming_widget_left_margin",function(){o(s("#streaming_widget_left_margin"))})}}(jQuery);