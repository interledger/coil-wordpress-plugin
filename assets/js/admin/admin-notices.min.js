/*! Coil Web Monetization for WordPress v2.0.0 Tuesday 12th July 2022 09:58:40 AM GMT+0200 */
!function(a){if("undefined"!=typeof coilAdminParams&&coilAdminParams.ajax_url){const g=coilAdminParams.site_logo_url,m=coilAdminParams.coil_logo_url.light,u=coilAdminParams.coil_logo_url.dark,_=coilAdminParams.coil_streaming_logo_url.light,d=coilAdminParams.coil_streaming_logo_url.dark,p=coilAdminParams.not_monetized_post_types,h=coilAdminParams.exclusive_post_types,v=coilAdminParams.general_modal_msg,w=coilAdminParams.exclusive_modal_msg,f=coilAdminParams.invalid_payment_pointer_msg,y=coilAdminParams.invalid_blank_input_msg,x=coilAdminParams.invalid_url_msg,b=coilAdminParams.invalid_margin_value_msg,k=coilAdminParams.streaming_widget_position,A=a(".nav-tab-wrapper a.nav-tab-active").attr("id"),P="#EE4852",$=a("form").serialize();let l=!1;if("coil-welcome-settings"===A&&(0===a(".coil-welcome-notice").length?a(".tab-styling .button-primary").show():a(".tab-styling .button-primary").hide()),"coil-general-settings"===A){const C=a(".coil-no-payment-pointer-notice");0<C.length&&(C.hide(),0<a("#setting-error-settings_updated").length&&C.show())}if("coil-exclusive-settings"===A){var t=a('input[name="coil_exclusive_settings_group[coil_exclusive_toggle]"]').is(":checked"),e="site_logo"===a("#coil_branding option:selected").val();t?a("*.exclusive-content-section").show():a("*.exclusive-content-section").hide(),e?a(".set-site-logo-description").show():a(".set-site-logo-description").hide();const z=a(".no_logo, .site_logo, .coil_logo");""===z.attr("src")?z.hide():z.show()}if("streaming-widget-settings"===A){const T=a('input[name="streaming_widget_settings_group[streaming_widget_toggle]"]').is(":checked"),D=a("#streaming_widget_text"),E=a("#members_streaming_widget_text"),S=/^\s+$/,V=k.split("-");T?a("*.streaming-widget-section").show():a("*.streaming-widget-section").hide(),S.test(D.val())&&a("div.coil-preview.coil-non-members .streaming-widget div > div").hide(),S.test(E.val())&&a("div.coil-preview.coil-members .streaming-widget div > div").hide(),a(".margin-"+V[0]).show(),a(".margin-"+V[1]).show()}function i(t,e,i,n){let o="";e.forEach(t=>{document.getElementById(t+i).checked&&(o+=t+"s, ")}),0<o.length&&(o=(o=o.slice(0,-2)).replace(/,([^,]*)$/," and$1"),n=n.replace("{postTypes}",o),confirm(n)||"boolean"==typeof t.cancelable&&!t.cancelable||(t.preventDefault(),l=!1))}function n(e,i,n){const t=e.next(),o=a(document).scrollTop();let l=null;if(null!==t&&t.hasClass("invalid-input")&&(l=t),i)null!==l&&(e.removeAttr("style"),l.remove());else if(e.css("border-color",P),null===l){e.after('<p class="invalid-input" style="color: '+P+'">'+n+"</p>");i=null!==e.prev()?e.prev().position():null;let t;o>(t=null!=i?i.top:0)?a("html, body").animate({scrollTop:t+"px"}):a("html, body").animate({scrollTop:"0px"})}}function o(e){const t=null!==e.next()?e.next().next():null,i=a(document).scrollTop();var n=/(^(-)?[0-9]+((p)|(px)|(P)|(PX))?$)/.test(e.val())||""===e.val();let o=null;if(null!==t&&t.hasClass("invalid-input")&&(o=t),n)null!==o&&(e.removeAttr("style"),o.remove());else if(e.css("border-color",P),null===o){null!==e.next()&&e.next().after('<p class="invalid-input" style="color: '+P+'">'+b+"</p>");let t;null!==a(".coil-margin-input-group")&&null!==a(".coil-margin-input-group").prev()?void 0!==(n=a(".coil-margin-input-group").prev().position())&&(t=n.top):t=0,i>t?a("html, body").animate({scrollTop:t+"px"}):a("html, body").animate({scrollTop:"0px"})}}function s(t,e,i,n){const o=t.next();let l=null;null!==(l=null!==o&&o.hasClass("invalid-input")?o:l)&&e?(t.removeAttr("style"),l.remove()):i&&/^\s+$/.test(t.val())&&null===l&&(t.css("border-color",P),t.after('<p class="invalid-input" style="color: '+P+'">'+n+"</p>"))}function c(t){const e=null!==t.next()?t.next().next():null,i=/^\s+$/,n=!i.test(t.val()),o=/(^(-)?[0-9]+((p)|(px)|(P)|(PX))?$)/.test(t.val())||""===t.val();let l=null;null!==(l=void 0!==e&&null!==e&&e.hasClass("invalid-input")?e:l)?(n&&l.text()===y||o&&l.text()===b)&&(t.removeAttr("style"),l.remove()):i.test(t.val())&&null===l&&null!==t.next()&&(t.css("border-color",P),t.next().after('<p class="invalid-input" style="color: '+P+'">'+y+"</p>"))}function r(t){return/.+\..+/.test(t)}window.addEventListener("beforeunload",function(t){l||$===a("form").serialize()?delete t.returnValue:(t.preventDefault(),t.returnValue="")}),a(document).on("submit","form",function(){l=!0,"coil-exclusive-settings"===A?i(event,p,"_visibility_exclusive",w):"coil-general-settings"===A&&i(event,h,"_monetization_not-monetized",v)}),a(document).on("focusout","#coil_payment_pointer",function(){n(a("#coil_payment_pointer"),/^(https:\/\/.)|^[\$]./.test(a(this).val())||0===a(this).val().length,f)}),a(document).on("input","#coil_payment_pointer",function(){s(a("#coil_payment_pointer"),/^(https:\/\/.)|^[\$]./.test(a(this).val()),!1,"")}),a(document).on("change",'input[name="coil_exclusive_settings_group[coil_exclusive_toggle]"]',function(){a(".exclusive-content-section").toggle()}),a(document).on("input","#coil_paywall_title",function(){""!==a(this).val()?a(".coil-paywall-heading").text(a(this).val()):a(".coil-paywall-heading").text(a(this).attr("placeholder"))}),a(document).on("input","#coil_paywall_message",function(){""!==a(this).val()?a(".coil-paywall-body").text(a(this).val()):a(".coil-paywall-body").text(a(this).attr("placeholder"))}),a(document).on("focusout","#coil_paywall_button_text",function(){n(a("#coil_paywall_button_text"),!/^\s+$/.test(a(this).val()),y)}),a(document).on("input","#coil_paywall_button_text",function(){const t=a("#coil_paywall_button_text"),e=/^\s+$/,i=!e.test(a(this).val());s(t,i,!0,y),""===a(this).val()||e.test(a(this).val())?a(".coil-paywall-cta").text(a(this).attr("placeholder")):a(".coil-paywall-cta").text(a(this).val())}),a(document).on("focusout","#coil_paywall_button_link",function(){n(a("#coil_paywall_button_link"),r(a(this).val())||""===a(this).val(),x)}),a(document).on("input","#coil_paywall_button_link",function(){s(a("#coil_paywall_button_link"),!/^\s+$/.test(a(this).val()),!0,y)}),a(document).on("change",'input[name="coil_exclusive_settings_group[coil_message_color_theme]"]',function(){var t=a(this).val(),e=a("#coil_branding").val();let i="";a(".coil-paywall-container").attr("data-theme",t),"coil_logo"===e&&(i="light"===t?m:u,a(".coil-paywall-image").attr("src",i))}),a(document).on("change","#coil_branding",function(){"site_logo"===a("#coil_branding option:selected").val()?a(".set-site-logo-description").show():a(".set-site-logo-description").hide()}),a(document).on("change","#coil_branding",function(){var t=a(this).val(),e=a('input[name="coil_exclusive_settings_group[coil_message_color_theme]"]:checked').val();let i="";a(".coil-paywall-image").removeClass("no_logo site_logo coil_logo").addClass(t),"coil_logo"===t?i="light"===e?m:u:"site_logo"===t&&(i=g),""===i?a("."+t).hide():a("."+t).show(),a(".coil-paywall-image").attr("src",i)}),a(document).on("change",'input[name="coil_exclusive_settings_group[coil_title_padlock]"]',function(){a(this).closest(".coil-row").find(".coil-column-5").toggleClass("hidden")}),a(document).on("change",'input[name="coil_exclusive_settings_group[coil_padlock_icon_position]"]',function(){var t=a(this).val();a(".coil-title-preview-container").attr("data-padlock-icon-position",t)}),a(document).on("change",'input[name="coil_exclusive_settings_group[coil_padlock_icon_style]"]',function(){const t=a(this),e=a(".coil-title-preview-container .coil-padlock-icon"),i=t.siblings("svg").clone();e.html(i)}),a(document).on("input","#coil_content_container",function(){s(a("#coil_content_container"),!/^\s+$/.test(a(this).val()),!0,y)}),a(document).on("change",'input[name="streaming_widget_settings_group[streaming_widget_toggle]"]',function(){a(".streaming-widget-section").toggle()}),a(document).on("input","#streaming_widget_text",function(){var t="div.coil-preview.coil-non-members .streaming-widget div > div";""!==a(this).val()?/^\s+$/.test(a(this).val())?a(t).hide():(a(t).text(a(this).val()),a(t).show()):(a(t).text(a(this).attr("placeholder")),a(t).show())}),a(document).on("focusout","#streaming_widget_link",function(){n(a("#streaming_widget_link"),r(a(this).val())||""===a(this).val(),x)}),a(document).on("input","#streaming_widget_link",function(){s(a("#streaming_widget_link"),!/^\s+$/.test(a(this).val()),!0,y)}),a(document).on("input","#members_streaming_widget_text",function(){var t="div.coil-preview.coil-members .streaming-widget div > div";""!==a(this).val()?/^\s+$/.test(a(this).val())?a(t).hide():(a(t).text(a(this).val()),a(t).show()):(a(t).text(a(this).attr("placeholder")),a(t).show())}),a(document).on("change",'input[name="streaming_widget_settings_group[streaming_widget_color_theme]"]',function(){var t=a(this).val();let e="",i="";a(".coil-preview .streaming-widget").attr("data-theme",t),i="light"===t?(e=m,_):(e=u,d),a(".coil-preview.coil-non-members .streaming-widget-image").attr("src",e),a(".coil-preview.coil-members .streaming-widget-image").attr("src",i)}),a(document).on("change",'input[name="streaming_widget_settings_group[streaming_widget_member_display]"]',function(){a("div.coil-preview.coil-members").toggleClass("hide")}),a(document).on("change",'input[name="streaming_widget_settings_group[streaming_widget_size]"]',function(){var t=a(this).val();a(".coil-preview .streaming-widget").attr("data-size",t)}),a(document).on("change",'select[name="streaming_widget_settings_group[streaming_widget_position]"]',function(){const t=a(this).val(),e=t.split("-");a(".coil-preview .streaming-widget").attr("data-position",t),"top"===e[0]?(a(".margin-bottom").hide(),a(".margin-top").show()):(a(".margin-top").hide(),a(".margin-bottom").show()),"left"===e[1]?(a(".margin-right").hide(),a(".margin-left").show()):(a(".margin-left").hide(),a(".margin-right").show())}),a(document).on("input","#streaming_widget_top_margin",function(){c(a("#streaming_widget_top_margin"))}),a(document).on("focusout","#streaming_widget_top_margin",function(){o(a("#streaming_widget_top_margin"))}),a(document).on("input","#streaming_widget_bottom_margin",function(){c(a("#streaming_widget_bottom_margin"))}),a(document).on("focusout","#streaming_widget_bottom_margin",function(){o(a("#streaming_widget_bottom_margin"))}),a(document).on("input","#streaming_widget_right_margin",function(){c(a("#streaming_widget_right_margin"))}),a(document).on("focusout","#streaming_widget_right_margin",function(){o(a("#streaming_widget_right_margin"))}),a(document).on("input","#streaming_widget_left_margin",function(){c(a("#streaming_widget_left_margin"))}),a(document).on("focusout","#streaming_widget_left_margin",function(){o(a("#streaming_widget_left_margin"))}),a(document).on("click","#css_selector_button",function(t){t.preventDefault();let e=coilAdminParams.latest_post;e.includes("?")||(e+="?"),a.get(e+"&coil-get-css-selector=1",function(e){const t=a(e).find("#coil-content"),i=0<t.length&&t.parent(),n=[];if(!1!==i&&0<i.length){let t=i.parent();for(;0!==t.length&&"DIV"===t.prop("tagName");)t=t.parent();0!==t.length&&"DIV"!==t.prop("tagName")&&n.push(t.prop("tagName").toLowerCase());e=i.prop("classList"),e=(i.hasClass("entry-content")?n.push(".entry-content"):n.push("."+e[0]),n.join(" "));confirm("Would you like to set your CSS selector to "+e+"?")&&a("#coil_content_container").val(e)}else alert("We could not find any containers to use, you'll need to enter in your CSS Selector manually.")})})}}(jQuery);